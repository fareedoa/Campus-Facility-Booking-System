<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CampusBook ‚Äî University Facility Booking</title>

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=DM+Sans:wght@300;400;500;600&display=swap"
    rel="stylesheet" />

  <!-- ‚îÄ‚îÄ Stylesheets (order matters) ‚îÄ‚îÄ -->
  <link rel="stylesheet" href="css/variables.css" />
  <link rel="stylesheet" href="css/base.css" />
  <link rel="stylesheet" href="css/layout.css" />
  <link rel="stylesheet" href="css/components.css" />
  <link rel="stylesheet" href="css/pages.css" />
</head>

<body>

  <!-- ‚îÄ‚îÄ SIDEBAR NAVIGATION ‚îÄ‚îÄ -->
  <nav class="sidebar">
    <div class="sidebar-logo">
      <div class="logo-mark">CampusBook</div>
      <div class="logo-sub">UG Facility Booking Portal</div>
    </div>

    <div class="sidebar-section">
      <div class="sidebar-section-label">Main</div>
      <button class="nav-item active" onclick="showPage('dashboard', this)">
        <span class="nav-icon">‚äû</span><span>Dashboard</span>
      </button>
      <button class="nav-item" onclick="showPage('facilities', this)">
        <span class="nav-icon">üèõ</span><span>Facilities</span>
      </button>
      <button class="nav-item" onclick="showPage('availability', this)">
        <span class="nav-icon">üìÖ</span><span>Availability</span>
      </button>
      <button class="nav-item" onclick="showPage('bookings', this)">
        <span class="nav-icon">üìã</span><span>My Bookings</span>
      </button>
    </div>

    <div class="sidebar-bottom">
    </div>
  </nav>

  <!-- Mobile sidebar overlay (closes drawer on tap) -->
  <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebar()"></div>

  <!-- ‚îÄ‚îÄ MAIN CONTENT AREA ‚îÄ‚îÄ -->
  <div class="main">

    <!-- Top Bar -->
    <div class="topbar">
      <!-- Hamburger (mobile only) -->
      <button class="hamburger" onclick="toggleSidebar()" aria-label="Open menu">
        <span></span><span></span><span></span>
      </button>
      <div class="topbar-title" id="topbarTitle">Dashboard</div>
      <div class="topbar-actions">
        <button class="btn btn-gold" onclick="openBookingModal()">+ New Booking</button>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ PAGE: DASHBOARD ‚îÄ‚îÄ -->
    <div class="page active" id="page-dashboard">
      <!-- Injected by pages/dashboard.js -->
    </div>

    <!-- ‚îÄ‚îÄ PAGE: FACILITIES ‚îÄ‚îÄ -->
    <div class="page" id="page-facilities">
      <!-- Injected by pages/facilities.js -->
    </div>

    <!-- ‚îÄ‚îÄ PAGE: AVAILABILITY ‚îÄ‚îÄ -->
    <div class="page" id="page-availability">
      <!-- Injected by pages/availability.js -->
    </div>

    <!-- ‚îÄ‚îÄ PAGE: BOOKINGS ‚îÄ‚îÄ -->
    <div class="page" id="page-bookings">
      <!-- Injected by pages/bookings.js -->
    </div>

  </div><!-- end .main -->

  <!-- ‚îÄ‚îÄ MODALS ‚îÄ‚îÄ -->

  <!-- Booking Modal -->
  <div class="modal-overlay" id="bookingModal">
    <div class="modal">
      <div class="modal-header">
        <button class="modal-close" onclick="closeModal('bookingModal')">‚úï</button>
        <div class="modal-title" id="bookingModalTitle">New Booking</div>
        <div class="modal-sub">Reserve a campus facility</div>
      </div>
      <div class="modal-body">
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Facility</label>
            <select id="formFacility" onchange="updateBookingSummary()">
              <option value="">Select a facility</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Date</label>
            <input type="date" id="formDate" onchange="updateBookingSummary()" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Start Time</label>
            <input type="time" id="formStart" value="09:00" onchange="autoSetEndTime(); updateBookingSummary()" />
          </div>
          <div class="form-group">
            <label class="form-label">End Time (Auto 30 min)</label>
            <input type="time" id="formEnd" value="09:30" readonly
              style="background-color: var(--smoke); cursor: not-allowed; color: var(--mid);" />
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Student ID</label>
          <input type="text" id="formStudentId" placeholder="e.g. 10932401" />
        </div>
        <div class="form-group">
          <label class="form-label">Purpose / Notes</label>
          <textarea id="formNotes" placeholder="Describe the purpose of your booking‚Ä¶"></textarea>
        </div>
        <div class="summary-box" id="bookingSummary" style="display:none;">
          <div class="summary-box-title">Booking Summary</div>
          <div class="summary-row"><span class="summary-key">Facility</span><span class="summary-val"
              id="sumFacility">‚Äî</span></div>
          <div class="summary-row"><span class="summary-key">Date</span><span class="summary-val" id="sumDate">‚Äî</span>
          </div>
          <div class="summary-row"><span class="summary-key">Time</span><span class="summary-val" id="sumTime">‚Äî</span>
          </div>
        </div>
        <div id="formError" class="form-error" style="display:none;"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="closeModal('bookingModal')">Cancel</button>
        <button class="btn btn-gold" onclick="submitBooking()" id="submitBtn">Confirm Booking</button>
      </div>
    </div>
  </div>


  <!-- Cancel Confirmation Dialog -->
  <div class="modal-overlay" id="cancelDialog">
    <div class="modal modal-sm">
      <div class="modal-header" style="background:linear-gradient(135deg,#8b2e2e,#c0392b);">
        <button class="modal-close" onclick="closeModal('cancelDialog')">‚úï</button>
        <div class="modal-title" style="color:#fff;">Cancel Booking</div>
        <div class="modal-sub" style="color:rgba(255,255,255,0.75);">This action cannot be undone</div>
      </div>
      <div class="modal-body" style="text-align:center;padding:28px 32px 20px;">
        <div style="font-size:48px;margin-bottom:16px;">‚ö†Ô∏è</div>
        <p style="font-size:15px;color:var(--ink);margin-bottom:8px;">Are you sure you want to cancel this booking?</p>
        <div id="cancelDialogInfo"
          style="background:var(--smoke);border-radius:10px;padding:12px 16px;margin:16px 0;font-size:13px;color:var(--mid);text-align:left;">
        </div>
        <p style="font-size:12px;color:var(--mid);">The facility time slot will be released back to the pool.</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="closeModal('cancelDialog')">Keep Booking</button>
        <button class="btn btn-danger" id="cancelDialogConfirmBtn" onclick="confirmCancelBooking()">Yes, Cancel
          It</button>
      </div>
    </div>
  </div>

  <!-- Delete Confirmation Dialog -->
  <div class="modal-overlay" id="deleteDialog">
    <div class="modal modal-sm">
      <div class="modal-header" style="background:linear-gradient(135deg,#6b2323,#8b1a1a);">
        <button class="modal-close" onclick="closeModal('deleteDialog')">‚úï</button>
        <div class="modal-title" style="color:#fff;">Delete Booking</div>
        <div class="modal-sub" style="color:rgba(255,255,255,0.75);">Permanently remove this record</div>
      </div>
      <div class="modal-body" style="text-align:center;padding:28px 32px 20px;">
        <div style="font-size:48px;margin-bottom:16px;">üóëÔ∏è</div>
        <p style="font-size:15px;color:var(--ink);margin-bottom:8px;">Are you sure you want to permanently delete this
          booking?</p>
        <div id="deleteDialogInfo"
          style="background:var(--smoke);border-radius:10px;padding:12px 16px;margin:16px 0;font-size:13px;color:var(--mid);text-align:left;">
        </div>
        <p style="font-size:12px;color:var(--crimson);font-weight:600;">‚ö† This record will be permanently removed and
          cannot be restored.</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="closeModal('deleteDialog')">Keep Record</button>
        <button class="btn btn-danger" id="deleteDialogConfirmBtn" onclick="confirmDeleteBooking()">Yes, Delete
          It</button>
      </div>
    </div>
  </div>

  <!-- Edit Booking Modal -->
  <div class="modal-overlay" id="editModal">
    <div class="modal">
      <div class="modal-header">
        <button class="modal-close" onclick="closeModal('editModal')">‚úï</button>
        <div class="modal-title">Edit Booking</div>
        <div class="modal-sub">Update reservation details</div>
      </div>
      <div class="modal-body">
        <input type="hidden" id="editId" />
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Date</label>
            <input type="date" id="editDate" />
          </div>
          <div class="form-group">
            <label class="form-label">Status</label>
            <select id="editStatus">
              <option value="CONFIRMED">Confirmed</option>
              <option value="PENDING">Pending</option>
              <option value="CANCELLED">Cancelled</option>
              <option value="COMPLETED">Completed</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Start Time</label>
            <input type="time" id="editStart" />
          </div>
          <div class="form-group">
            <label class="form-label">End Time</label>
            <input type="time" id="editEnd" />
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="closeModal('editModal')">Cancel</button>
        <button class="btn btn-gold" onclick="submitEdit()">Save Changes</button>
      </div>
    </div>
  </div>

  <!-- Toast Notification Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- ‚îÄ‚îÄ JavaScript (load order matters) ‚îÄ‚îÄ -->
  <script src="js/config.js"></script>
  <script src="js/api.js"></script>
  <script src="js/state.js"></script>
  <script src="js/utils.js"></script>
  <script src="pages/dashboard.js"></script>
  <script src="pages/facilities.js"></script>
  <script src="pages/availability.js"></script>
  <script src="pages/bookings.js"></script>
  <script src="js/modals.js"></script>
  <script src="js/app.js"></script>

</body>

</html>